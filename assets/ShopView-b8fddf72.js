import{R as T,P as I,m as R,_ as A}from"./icon-star-full-a396071f.js";import{m as y,g as D,_ as M,r as d,o as n,c as a,a as t,b as m,l as x,x as V,F as p,h,n as v,f as j,t as l,d as $,k as F,i as _,u as L,w as B,p as G,e as H}from"./index-cd4327d4.js";import{s as C}from"./shopStore-b3865768.js";import{C as N,c as w}from"./CommentDisplay-a6fae22d.js";import{F as E}from"./FavoriteBtn-471746ec.js";import{R as O}from"./RateDisplay-669f9fb6.js";import"./userPhoto-8e961c51.js";import"./icon-favorite-active-69e4f444.js";const U={data(){return{sort:"最新日期",data:{}}},components:{RateGroup:T,CommentDisplay:N,PaginationComponent:I},props:{shopData:{type:Object,default(){return{comments:[],drinks:[]}}}},mixins:[R],watch:{shopData(){this.data=JSON.parse(JSON.stringify(this.shopData)),this.getRateGroupInfo(this.data.comments),this.sortAction(1)},sort(){this.sortAction(1)}},methods:{...y(w,["clickPin","clickPage","getRateGroupInfo","sortCommentsFn"]),filterDrink(s){return this.shopData.drinks.filter(u=>u.id===s)[0]},sortAction(s){const c=[...this.shopData.comments];this.sortCommentsFn(c,this.sort,s)},clickPageAction(s){this.clickPage(s),this.sortAction(this.pagination.current)},clickPinAction(s){this.clickPin(s),this.sortAction(1)}},computed:{...D(w,["rateGroup","pagination","sortComments"])}},z={class:"modal fade",ref:"modal"},J={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},q={class:"modal-content rounded-4"},K={class:"modal-header border-bottom-0"},Q=t("h1",{class:"modal-title fs-5 invisible",id:"addCommentModalLabel"},"店家評價",-1),W={class:"modal-body pt-0 pb-10"},X={class:"container-fluid"},Y={class:"d-flex align-items-center justify-content-end mb-4",id:"shopModal-comments"},Z=t("label",{for:"type",class:"me-4 fw-medium"},"排序",-1),tt=t("option",{selected:"",value:"最新日期"},"最新日期",-1),st=t("option",{value:"評分最高"},"評分最高",-1),ot=t("option",{value:"最冰溫度"},"最冰溫度",-1),et=t("option",{value:"最少甜度"},"最少甜度",-1),nt=[tt,st,ot,et],it={class:"px-5"},at={class:"row"},lt={class:"col-5"},ct=["onClick"],rt=["src","alt"],dt={class:"d-flex flex-column justify-content-between"},mt={class:"fs-5 fw-medium mb-2"},pt={class:"d-flex align-items-center"},ht=t("img",{width:"20",class:"me-1",src:A,alt:"rate"},null,-1),_t={class:"fs-6 font-handwriting fw-bold mb-minus1"},ut={class:"fs-6 font-handwriting lh-lg"},ft={class:"ms-1"},gt=t("span",{class:"mx-1"},"｜",-1),bt={class:"ms-1"},kt={class:"col-7 d-flex"};function yt(s,c,u,P,f,r){const g=d("RateGroup"),b=d("CommentDisplay"),k=d("PaginationComponent");return n(),a("div",z,[t("div",J,[t("div",q,[t("div",K,[Q,t("button",{type:"button",class:"btn-close",onClick:c[0]||(c[0]=(...e)=>s.hideModal&&s.hideModal(...e))})]),t("div",W,[t("div",X,[m(g,{class:"mb-10",data:s.rateGroup,onEmitPin:r.clickPinAction},null,8,["data","onEmitPin"]),t("div",Y,[Z,x(t("select",{id:"type",class:"form-select py-2 px-4 border-black rounded-pill",style:{"max-width":"180px"},"onUpdate:modelValue":c[1]||(c[1]=e=>f.sort=e)},nt,512),[[V,f.sort]])]),t("div",it,[(n(!0),a(p,null,h(s.sortComments,(e,i)=>(n(),a("div",{class:v(["pb-10",{"border-bottom border-gray mb-10":i!==s.sortComments.length-1}]),key:`shopComment ${i}`},[t("div",at,[t("div",lt,[t("a",{class:"d-flex",href:"#",onClick:j(o=>s.pushAndHide(`/drink/${e.drinkId}`),["prevent"])},[t("img",{class:"img-full me-3",style:{width:"170px",height:"170px"},src:r.filterDrink(e.drinkId).imageUrl,alt:r.filterDrink(e.drinkId).name},null,8,rt),t("div",dt,[t("div",null,[t("p",mt,l(r.filterDrink(e.drinkId).name),1),t("div",pt,[ht,t("p",_t,l(r.filterDrink(e.drinkId).rate),1)])]),t("p",ut,[$(" M "),t("span",ft," $ "+l(r.filterDrink(e.drinkId).price.m),1),gt,$(" L "),t("span",bt," $ "+l(r.filterDrink(e.drinkId).price.l),1)])])],8,ct)]),t("div",kt,[m(b,{data:e},null,8,["data"])])])],2))),128)),s.pagination.total>1?(n(),F(k,{key:0,pagination:s.pagination,onEmitPage:r.clickPageAction},null,8,["pagination","onEmitPage"])):_("",!0)])])])])])],512)}const vt=M(U,[["render",yt]]),$t="/whatToDrink/assets/icon-special-cold-ab04723a.svg",S="/whatToDrink/assets/icon-special-recommend-838e6f57.svg";const wt={data(){return{drinks:{}}},components:{RateDisplay:O,FavoriteBtn:E,ShopCommentModal:vt},props:["id"],watch:{id:"init"},methods:{...y(C,["getSingleShop","changeType"]),...y(w,["getComments","sortComments"]),init(){const s=this.$refs.typeList.offsetHeight+64;console.log("listHeight",s),this.$refs.menu.style.minHeight=`${s}px`,this.changeType("全部飲品")}},computed:{...D(C,["singleShop","selectType","filterCustomType","filterMenu","shopRateScore"])},created(){this.getSingleShop(this.id),this.getComments()},mounted(){this.init(),console.log("mounted")}},Ct=s=>(G("data-v-7b8d7020"),s=s(),H(),s),St={class:"shopView pb-20"},Dt=["src","alt"],Mt={class:"shopView-header-content container position-absolute start-50 bottom-0"},Pt={class:"row justify-content-center"},Tt={class:"col-10 col-3xl-12 d-flex justify-content-between"},It={class:"fs-3 fw-bold title-stroke-2"},Rt={class:"text-end"},At={class:"container"},xt={class:"row justify-content-center"},Vt={class:"col-10 col-3xl-12"},jt={class:"menu px-6 py-10 border border-3 border-secondary-600 rounded-4",ref:"menu"},Ft={class:"row gy-10 gx-10"},Lt={class:"table align-middle"},Bt={scope:"col",colspan:"4",class:"fs-5 border-0"},Gt={scope:"row",class:"fw-normal",width:"30%"},Ht={width:"60"},Nt={class:"d-flex align-items-center"},Et=["src"],Ot={class:"fs-6 font-handwriting mb-minus1"},Ut=Ct(()=>t("td",null,[t("ul",{class:"list-unstyled mb-0 d-flex justify-content-center"},[t("li",null,[t("img",{class:"me-2",src:$t,alt:"僅限冷飲"})]),t("li",null,[t("img",{class:"me-2",src:S,alt:"店家推薦"})]),t("li",null,[t("img",{class:"me-2",src:S,alt:"店家推薦"})])])],-1)),zt={width:"120"},Jt={class:"font-handwriting mb-minus1"},qt={key:0},Kt={key:1},Qt={key:2},Wt={class:"menu-list list-unstyled mb-0",ref:"typeList"},Xt=["onClick"];function Yt(s,c,u,P,f,r){const g=d("RateDisplay"),b=d("RouterLink"),k=d("FavoriteBtn"),e=d("ShopCommentModal");return n(),a("div",St,[t("header",{class:"shopView-header mb-20 py-4",style:L(`background-color: ${s.singleShop.bgColor}`)},[t("img",{src:s.singleShop.imageUrl,alt:s.singleShop.name},null,8,Dt),t("div",Mt,[t("div",Pt,[t("div",Tt,[t("h2",It,l(s.singleShop.name),1),t("button",{type:"button",class:"btn border-0 p-0",onClick:c[0]||(c[0]=(...i)=>this.$refs.shopCommentModal.showModal&&this.$refs.shopCommentModal.showModal(...i))},[m(g,{rate:s.shopRateScore,class:"rateDisplay-md hasHandText strokeTitle mb-2"},null,8,["rate"]),t("p",Rt,l(s.singleShop.comments?s.singleShop.comments.length:0)+" 則評論 ",1)])])])])],4),t("section",At,[t("div",xt,[t("div",Vt,[t("div",jt,[t("div",Ft,[(n(!0),a(p,null,h(Object.keys(s.filterMenu),i=>(n(),a("div",{class:v({"col-6":s.selectType==="全部飲品","col-12":s.selectType!=="全部飲品"}),key:`filterMenuType ${i}`},[t("table",Lt,[t("thead",null,[t("tr",null,[t("th",Bt,l(i),1)])]),t("tbody",null,[(n(!0),a(p,null,h(s.filterMenu[i],o=>(n(),a("tr",{key:`filterMenuItem ${o}`},[t("th",Gt,[m(b,{to:`/drink/${o.id}`},{default:B(()=>[$(l(o.name),1)]),_:2},1032,["to"])]),t("td",Ht,[t("div",Nt,[t("img",{width:"20",class:"me-2",src:`/src/assets/images/icon-star-${o.rate?"full":"empty"}.svg`,alt:"star"},null,8,Et),t("p",Ot,l(o.rate?o.rate:"0"),1)])]),Ut,t("td",zt,[t("p",Jt,[o.price.m?(n(),a("span",qt,"M $ "+l(o.price.m),1)):_("",!0),o.price.m&&o.price.l?(n(),a("span",Kt,"｜")):_("",!0),o.price.l?(n(),a("span",Qt,"L $ "+l(o.price.l),1)):_("",!0)])]),t("td",null,[m(k,{class:"btn-favorite-sm",id:o.id},null,8,["id"])])]))),128))])])],2))),128))]),t("ul",Wt,[(n(!0),a(p,null,h(s.filterCustomType,i=>(n(),a("li",{key:`filterCustomType ${i}`},[t("button",{type:"button",class:v(["menu-btn",{active:s.selectType===i}]),onClick:o=>s.changeType(i)},[t("span",null,l(i),1)],10,Xt)]))),128))],512)],512)])])]),m(e,{ref:"shopCommentModal",shopData:s.singleShop},null,8,["shopData"])])}const ls=M(wt,[["render",Yt],["__scopeId","data-v-7b8d7020"]]);export{ls as default};
