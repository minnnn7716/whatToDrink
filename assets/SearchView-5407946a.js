import{_ as k,r as m,o as a,c as i,a as t,n as _,F as S,h as b,t as d,b as l,w as u,f as j,p as M,e as T,d as D,i as y,m as I,g as $}from"./index-1daaf648.js";import{d as C}from"./drinkStore-c5ed7e10.js";import{s as x}from"./shopStore-77d3be50.js";import{a as B,S as U}from"./SwitchBtnGroup-85beaf0a.js";import{R as L}from"./RateDisplay-af776b40.js";import{S as N}from"./SearchTableMode-00560f9a.js";import"./FavoriteBtn-159c78c6.js";import"./icon-favorite-active-69e4f444.js";const E="/whatToDrink/assets/icon-sort-down-476a9bd1.svg",R="/whatToDrink/assets/icon-sort-up-adaa4e9e.svg";const F={data(){return{listShow:!1,options:{價錢:"price",總評價:"rate",熱量:"calorie",咖啡因:"caffeine"},order:""}},components:{SwitchBtnGroup:B},props:["propsSortSelect"],emits:["sort-select","sort-order"],watch:{listShow(){this.listShow?document.documentElement.style.overflow="hidden":document.documentElement.style.overflow="auto"},order(){this.$emit("sort-order",this.order)}},methods:{toggleList(){this.listShow=!this.listShow},changeSortItem(s){let e=this.propsSortSelect;e===s?e=!1:e=s,this.listShow=!1,this.$emit("sort-select",e)}}},G=s=>(M("data-v-62eee2d0"),s=s(),T(),s),V={class:"sortComponent"},A=["src","alt"],q={class:"sortComponent-list list-unstyled"},O=["onClick"],P=G(()=>t("img",{src:E,alt:"遞減","data-name":"down"},null,-1)),z=G(()=>t("img",{src:R,alt:"遞增","data-name":"up"},null,-1));function H(s,e,c,v,o,p){const g=m("SwitchBtnGroup");return a(),i(S,null,[t("div",V,[t("button",{type:"button",class:_(["sortComponent-btn btn",{active:c.propsSortSelect}]),onClick:e[0]||(e[0]=(...n)=>p.toggleList&&p.toggleList(...n))},[t("img",{src:`/src/assets/images/icon-sort-${o.order}.svg`,alt:o.order},null,8,A)],2),t("div",{class:_(["sortComponent-list-container",{show:o.listShow}])},[t("ul",q,[(a(!0),i(S,null,b(Object.keys(o.options),n=>(a(),i("li",{key:`sort ${n}`},[t("button",{type:"button",class:_(["sortComponent-list-item",{active:n===c.propsSortSelect}]),onClick:r=>p.changeSortItem([n,o.options[n]])},d(n),11,O)]))),128)),t("li",null,[l(g,{class:"switchBtnGroup-primary switchBtnGroup-icon-sm",onEmitBtn:e[1]||(e[1]=n=>o.order=n)},{start:u(()=>[P]),end:u(()=>[z]),_:1})])])],2)]),t("div",{class:_(["sortComponent-bg",{show:o.listShow}]),onClick:e[2]||(e[2]=j(n=>o.listShow=!1,["self"]))},null,2)],64)}const J=k(F,[["render",H],["__scopeId","data-v-62eee2d0"]]);const K={data(){return{imageModeData:[{id:0,shopId:0,name:"",imageUrl:"",price:{m:0,l:0},special:[],caffeine:"",rate:"0.0",shop:{name:"",code:""}}]}},components:{RateDisplay:L},props:{propsData:{type:Array,default(){return[]}}},watch:{propsData:{handler(){this.imageModeData=this.propsData,console.log("資料變更")},deep:!0,immediate:!0}},methods:{judgeSpecialImg(s){return{僅限冷飲:"cold",店家推薦:"recommend",無咖啡因:"noCaffeine",僅限熱飲:"hot",固定糖冰:"fixed"}[s]}}},Q={class:"row row-cols-3 gx-12 gy-15 list-unstyled"},W={class:"searchImage-item-imgSection mb-3"},X={class:"searchImage-item-imgContainer"},Y=["src","alt"],Z={class:"searchImage-item-tag"},tt={class:"d-flex align-items-center justify-content-between mb-3"},et={class:"fs-4 fw-bold"},st={class:"d-flex align-items-center justify-content-between"},ot={class:"list-unstyled mb-0 d-flex justify-content-center"},rt=["src","alt"],nt={class:"font-handwriting fs-6 fs-3xl-5 fs-5 fw-bold"},at={key:0},it={class:"ms-2"},ct={key:1},lt={key:2},dt={class:"ms-2"};function pt(s,e,c,v,o,p){const g=m("RouterLink"),n=m("RateDisplay");return a(),i("ul",Q,[(a(!0),i(S,null,b(o.imageModeData,r=>(a(),i("li",{class:"searchImage-item",key:`imageMode ${r.id}`},[l(g,{to:`/drink/${r.id}`},{default:u(()=>[t("div",W,[t("div",X,[t("img",{class:"searchImage-item-img img-full",src:r.imageUrl,alt:r.name},null,8,Y)]),l(g,{to:`/shops/${r.shop.code}`,class:"searchImage-item-tagContainer"},{default:u(()=>[t("span",Z,d(r.shop.name),1)]),_:2},1032,["to"])]),t("div",tt,[t("h2",et,d(r.name),1),l(n,{class:"rateDisplay-sm hasHandText",rate:r.rate},null,8,["rate"])]),t("div",st,[t("ul",ot,[(a(!0),i(S,null,b(r.special,(f,w)=>(a(),i("li",{key:`${r.id} ${f}`},[t("img",{class:_({"me-2":w!=r.special.length}),src:`/src/assets/images/icon-special-${p.judgeSpecialImg(f)}.svg`,alt:f},null,10,rt)]))),128))]),t("p",nt,[r.price.m?(a(),i("span",at,[D(" M "),t("span",it,"$ "+d(r.price.m),1)])):y("",!0),r.price.m&&r.price.l?(a(),i("span",ct," ｜ ")):y("",!0),r.price.l?(a(),i("span",lt,[D(" L "),t("span",dt,"$ "+d(r.price.l),1)])):y("",!0)])])]),_:2},1032,["to"])]))),128))])}const ht=k(K,[["render",pt],["__scopeId","data-v-d8d8bd04"]]),mt="/whatToDrink/assets/icon-mode-list-2e48adab.svg",_t="/whatToDrink/assets/icon-mode-block-e17d92fa.svg",ut="/whatToDrink/assets/icon-error-a1fa950d.svg",gt={data(){return{display:"table",isGetUrlData:!1,search:{type:"",keyword:""},sort:{select:!1,order:""}}},components:{SearchBar:U,SwitchBtnGroup:B,SortComponent:J,SearchImageMode:ht,SearchTableMode:N},watch:{$route:"getUrlData",isGetUrlData(){if(!this.isGetUrlData)return;const{keyword:s,type:e}=this.search;this.getSearchDrink(e,s),this.isGetUrlData=!1},shops(){if(!this.shops.length)return;const s=this.joinShopIdPath();this.getSearchDrink(this.search.type,s)},drinks:{handler(){this.judgeSortFn()},deep:!0,immediate:!0},sort:{handler(){this.judgeSortFn()},deep:!0,immediate:!0}},methods:{...I(C,["getSearchDrink","sortData"]),...I(x,["getSearchShops"]),getUrlData(){if(this.search.keyword=this.$route.query.keyword,this.search.type=this.$route.query.type,this.search.type==="shops"){this.getSearchShops(this.search.keyword),console.log("搜尋店家!");return}console.log("搜尋飲料!"),this.isGetUrlData=!0},joinShopIdPath(){const s=this.shops.map(c=>c.id);let e="";for(let c=0;c<s.length;c+=1)e+=`shopId=${s[c]}`,c!==s.length-1&&(e+="&");return e},judgeSortFn(){const{order:s,select:e}=this.sort;if(!e){this.sortData(s);return}this.sortData(s,e[1])}},computed:{...$(C,["drinks","sortDrinks"]),...$(x,["shops"]),resultNum(){let s=0;return this.drinks&&(s=this.drinks.length),s}},created(){this.getUrlData()}},ft={class:"container pt-20 pb-10"},St={class:"row"},yt={class:"col-10 col-3xl-12 mx-auto"},wt={class:"d-flex mb-5"},bt=t("span",{"data-name":"drinks"},"飲料",-1),kt=t("span",{"data-name":"shops"},"店家",-1),vt=t("img",{src:mt,alt:"列表模式","data-name":"table"},null,-1),Dt=t("img",{src:_t,alt:"圖表模式","data-name":"image"},null,-1),It={class:"d-flex align-items-center justify-content-between mb-10"},$t={class:"fs-5 fw-bold"},Ct={class:"fw-bold"},xt={type:"button",class:"btn btn-hoverScale border-0 d-flex align-items-center"};function Bt(s,e,c,v,o,p){const g=m("SwitchBtnGroup"),n=m("SearchBar"),r=m("SortComponent"),f=m("SearchTableMode"),w=m("SearchImageMode");return a(),i("div",ft,[t("div",St,[t("div",yt,[t("div",wt,[l(g,{class:"switchBtnGroup-light switchBtnGroup-text-h100 me-4 border border-black",defaultSelect:o.search.type,onEmitBtn:e[0]||(e[0]=h=>o.search.type=h)},{start:u(()=>[bt]),end:u(()=>[kt]),_:1},8,["defaultSelect"]),l(n,{class:"searchBar-border me-3",searchType:o.search.type},null,8,["searchType"]),l(g,{class:"switchBtnGroup-primary switchBtnGroup-icon me-3",onEmitBtn:e[1]||(e[1]=h=>o.display=h)},{start:u(()=>[vt]),end:u(()=>[Dt]),_:1}),l(r,{propsSortSelect:o.sort.select[0],onSortSelect:e[2]||(e[2]=h=>o.sort.select=h),onSortOrder:e[3]||(e[3]=h=>o.sort.order=h)},null,8,["propsSortSelect"])]),t("div",It,[t("p",$t," 找到 "+d(p.resultNum)+" 個符合「"+d(o.search.keyword)+"」的飲料 ",1),t("div",{class:_(["w-fit d-flex align-items-center py-1 ps-6 pe-2 bg-accent-300 border border-black rounded-pill transition-ease",{"opacity-0":!o.sort.select}])},[t("p",Ct," 目前依照「"+d(o.sort.select[0]?o.sort.select[0]:"排序")+"」 "+d(o.sort.order==="up"?"遞增":"遞減")+"排序 ",1),t("button",xt,[t("img",{src:ut,alt:"關閉",onClick:e[4]||(e[4]=h=>o.sort.select=!1)})])],2)]),p.resultNum?(a(),i(S,{key:0},[t("div",{class:_(["pb-10",{"d-none":o.display!=="table"}])},[l(f,{propsData:s.sortDrinks},null,8,["propsData"])],2),t("div",{class:_(["pb-15",{"d-none":o.display!=="image"}])},[l(w,{propsData:s.sortDrinks},null,8,["propsData"])],2)],64)):y("",!0)])])])}const Rt=k(gt,[["render",Bt]]);export{Rt as default};
