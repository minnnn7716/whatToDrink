import{_ as R,m as v,g as x,r as I,o as n,c as o,a as t,b as f,w as g,n as y,f as T,i as d,F as b,h as k,l as w,x as D,d as c,u as j,t as p,p as U,e as V}from"./index-1daaf648.js";import{s as S}from"./shopStore-77d3be50.js";import{d as O}from"./drinkStore-c5ed7e10.js";import{R as F}from"./RateDisplay-af776b40.js";const M="/whatToDrink/assets/wheel-shop-6e0ef056.png",C="/whatToDrink/assets/wheel-drink-4a76f710.png",H="/whatToDrink/assets/wheel-nodrink-60d72070.svg";const L={data(){return{step:"",randomType:"shop",resultIndex:0,selectIngredient:{base:!1,mix:!1,material:!1},randomData:{price:{m:0,l:0}},filterDrinkData:{},noResult:!1}},components:{RateDisplay:F},watch:{$route:"judgePath",selectType(){this.getWheelOption(),this.typeChange()}},methods:{...v(S,["getShops"]),...v(O,["getDrinks","changeType","getWheelOption"]),typeChange(){const s=this.selectType;s==="純茶"?this.selectIngredient={base:this.selectIngredient.base||"請選擇",mix:!1,material:!1}:s==="奶系列"||s==="特調"?this.selectIngredient={base:"請選擇",mix:"請選擇",material:!1}:this.selectIngredient={base:"請選擇",mix:"請選擇",material:"請選擇"}},judgePath(){const s=this.$route.fullPath;if(s.indexOf("?")===-1){this.step="wheelHome";return}const l=s.split("=")[1];this.step=l},randomFn(s){this.randomType=s;const l=[...this[`${s}s`]];if(this.$router.push("/wheel?=result"),this.filterDrinkData.length&&this.randomType==="drink"){this.randomData=this.randomIndex(this.filterDrinkData);return}this.noResult=!1,this.randomData=this.randomIndex(l)},randomIndex(s){const m=s.length,a=Math.floor(Math.random()*(m-0)+0);return s[a]},randomUrl(){let s="";return this.randomType==="shop"?s=`/shops/${this.randomData.code}`:this.randomType==="drink"&&(s=`/drink/${this.randomData.id}`),s},filterIngredient(s,l,m){let a=[];return s.length?m==="all"?a=s:m?a=s.filter(e=>e.ingredient[l].indexOf(m)!==-1):a=s.filter(e=>!e.ingredient[l].length):a=[],a},wheelDrink(){const s=this.selectType,l={...this.selectIngredient},m=Object.keys(l);let a=[];a=this.drinks.filter(e=>e.type===s);for(let e=0;e<m.length;e+=1){const u=m[e],h=l[m[e]];let _=h;h==="隨機"||h==="請選擇"?_="all":(h==="不添加"||!h)&&(_=!1),a=this.filterIngredient(a,u,_)}this.filterDrinkData=a,a.length?(this.randomData=this.randomIndex(a),this.noResult=!0):(this.randomData={price:{m:0,l:0}},this.noResult=!1),this.$router.push("/wheel?=result")}},computed:{...x(S,["shops"]),...x(O,["drinks","typeKind","wheelOptionData","selectType"])},created(){this.judgePath(),this.getShops(),this.getDrinks()}},r=s=>(U("data-v-fd515c97"),s=s(),V(),s),N={class:"wheel d-flex flex-column"},P={class:"container"},W={class:"row justify-content-center"},B={key:0,class:"col-8 col-3xl-10"},K={class:"mb-6 d-flex align-items-center justify-content-between"},z=r(()=>t("h2",{class:"title-angleStar-dark fs-4"},"轉轉轉，飲料跟著一起來～",-1)),A={key:0,class:"row gx-12"},E={class:"col-6 wheel-home-btn"},G=r(()=>t("img",{class:"img-fluid",src:M,alt:"隨機店家轉盤"},null,-1)),q=[G],J={class:"col-6 wheel-home-btn"},Q={href:"#"},X=r(()=>t("img",{class:"img-fluid",src:C,alt:"隨機飲品轉盤"},null,-1)),Y={key:1,class:"row gx-8"},Z=r(()=>t("div",{class:"col-6"},[t("img",{class:"img-fluid",src:C,alt:"隨機飲品轉盤"})],-1)),$={class:"col-6"},ee={class:"d-flex flex-column justify-content-between h-100"},te={class:"d-flex align-items-center mb-6"},se=r(()=>t("label",{for:"type",class:"me-4 fw-medium"},[c(" 飲料種類 "),t("span",{class:"fs-5 text-accent-600"},"*")],-1)),le=r(()=>t("option",{selected:"",disabled:""},"請選擇",-1)),ne=r(()=>t("option",null,"隨機",-1)),oe=["value"],ie=r(()=>t("label",{for:"base",class:"me-4 fw-medium"},[c(" 基底飲品 "),t("span",{class:"fs-5 text-accent-600"},"*")],-1)),re=["disabled"],ae=r(()=>t("option",{selected:"",disabled:""},"請選擇",-1)),de=r(()=>t("option",null,"隨機",-1)),ce=["value"],he=r(()=>t("label",{for:"mix",class:"me-4 fw-medium"},[c(" 調和飲料 "),t("span",{class:"fs-5 invisible"},"*")],-1)),me=["disabled"],pe={key:0,selected:"",disabled:""},ue={key:1},fe=r(()=>t("option",null,"不添加",-1)),_e=["value"],ge=r(()=>t("label",{for:"material",class:"me-4 fw-medium"},[c(" 各種好料 "),t("span",{class:"fs-5 invisible"},"*")],-1)),ye=["disabled"],be={key:0,selected:"",disabled:""},ke={key:1},we=r(()=>t("option",null,"不添加",-1)),De=["value"],ve={class:"d-flex align-items-center justify-content-end"},xe=r(()=>t("br",null,null,-1)),Ie={key:1,class:"wheel-result col-5 col-3xl-6"},Te={key:0},Se={key:0,class:"img-full",src:H,alt:"查無結果"},Oe={key:1},Ce=["src","alt"],Re=["src","alt"],je={class:"wheel-result-content-title title-stroke-2 fs-3 fw-bold"},Ue={key:0,class:"pt-3 pb-2 px-2 bg-white border border-gray-900 rounded-pill fs-normal1"},Ve={key:2,class:"wheel-result-content-info fs-4 font-handwriting fw-bold title-stroke-2"},Fe={key:0},Me={class:"ms-2"},He={key:1},Le={key:2},Ne={class:"ms-2"},Pe={class:"wheel-result-btnGroup d-flex flex-column"},We=r(()=>t("br",null,null,-1)),Be=r(()=>t("br",null,null,-1));function Ke(s,l,m,a,e,u){const h=I("RouterLink"),_=I("RateDisplay");return n(),o("div",N,[t("div",{class:y(["flex-grow-1 d-flex align-items-center",{"wheel-result-bg":e.step==="result"}])},[t("div",P,[t("div",W,[e.step==="wheelHome"||e.step==="select"?(n(),o("div",B,[t("div",K,[z,f(h,{to:"/wheel",class:y(["btn-custom btn-custom-primary-sm fw-bold opacity-0",{"opacity-100":e.step==="select"}])},{default:g(()=>[c(" 返回 ")]),_:1},8,["class"])]),e.step==="wheelHome"?(n(),o("div",A,[t("div",E,[t("a",{href:"#",onClick:l[0]||(l[0]=T(i=>u.randomFn("shop"),["prevent"]))},q)]),t("div",J,[t("a",Q,[f(h,{to:"/wheel?=select",href:"#",onClick:l[1]||(l[1]=T(i=>e.randomType="drink",["prevent"]))},{default:g(()=>[X]),_:1})])])])):d("",!0),e.step==="select"?(n(),o("div",Y,[Z,t("div",$,[t("form",ee,[t("div",null,[t("div",te,[se,t("select",{id:"type",class:"form-select py-3 px-4 flex-fit border-black rounded-pill",onChange:l[2]||(l[2]=i=>s.changeType(s.$refs.typeSelect.value)),ref:"typeSelect"},[le,ne,(n(!0),o(b,null,k(s.typeKind,i=>(n(),o("option",{key:`wheelOption.type ${i}`,value:i},p(i),9,oe))),128))],544)]),t("div",{class:y(["d-flex align-items-center mb-6",{"opacity-50":s.selectType==="請選擇"}])},[ie,w(t("select",{id:"base",class:"form-select py-3 px-4 flex-fit border-black rounded-pill","onUpdate:modelValue":l[3]||(l[3]=i=>e.selectIngredient.base=i),disabled:s.selectType==="請選擇"},[ae,de,(n(!0),o(b,null,k(s.wheelOptionData.base,i=>(n(),o("option",{key:`wheelOption.base ${i}`,value:i},p(i),9,ce))),128))],8,re),[[D,e.selectIngredient.base]])],2),t("div",{class:y(["d-flex align-items-center mb-6",{"opacity-50":!e.selectIngredient.mix}])},[he,w(t("select",{id:"mix",class:"form-select py-3 px-4 flex-fit border-black rounded-pill","onUpdate:modelValue":l[4]||(l[4]=i=>e.selectIngredient.mix=i),disabled:!e.selectIngredient.mix},[e.selectIngredient.mix==="請選擇"?(n(),o("option",pe," 請選擇 ")):d("",!0),s.wheelOptionData.mix.length?(n(),o("option",ue,"隨機")):d("",!0),fe,(n(!0),o(b,null,k(s.wheelOptionData.mix,i=>(n(),o("option",{key:`wheelOption.mix ${i}`,value:i},p(i),9,_e))),128))],8,me),[[D,e.selectIngredient.mix]])],2),t("div",{class:y(["d-flex align-items-center mb-6",{"opacity-50":!e.selectIngredient.material}])},[ge,w(t("select",{id:"material",class:"form-select py-3 px-4 flex-fit border-black rounded-pill","onUpdate:modelValue":l[5]||(l[5]=i=>e.selectIngredient.material=i),disabled:!e.selectIngredient.material},[e.selectIngredient.material==="請選擇"?(n(),o("option",be," 請選擇 ")):d("",!0),s.wheelOptionData.material.length?(n(),o("option",ke,"隨機")):d("",!0),we,(n(!0),o(b,null,k(s.wheelOptionData.material,i=>(n(),o("option",{key:`wheelOption.material ${i}`,value:i},p(i),9,De))),128))],8,ye),[[D,e.selectIngredient.material]])],2)]),t("div",ve,[t("button",{type:"button",class:"btn-circle bg-gray-700 text-white fs-6 fw-medium me-4 lh-sm",onClick:l[6]||(l[6]=i=>u.randomFn("drink"))},[c(" 全部"),xe,c("隨機 ")]),t("button",{type:"submit",class:"btn-circle bg-accent fs-6 fw-medium",onClick:l[7]||(l[7]=i=>u.wheelDrink())}," 轉吧 ")])])])])):d("",!0)])):d("",!0),e.step==="result"?(n(),o("div",Ie,[e.noResult?(n(),o("div",Te,[f(h,{to:"/wheel?=select",class:"wheel-result-content"},{default:g(()=>[e.randomType==="drink"?(n(),o("img",Se)):d("",!0)]),_:1})])):(n(),o("div",Oe,[f(h,{to:u.randomUrl(),href:"#",class:"wheel-result-content link-black",style:j({"background-color":e.randomData.bgColor})},{default:g(()=>[e.randomType==="drink"?(n(),o("img",{key:0,class:"img-full",src:e.randomData.imageUrl,alt:e.randomData.name},null,8,Ce)):(n(),o("img",{key:1,class:"img-fluid transition-ease",src:e.randomData.imageUrl,alt:e.randomData.name},null,8,Re)),t("div",null,[t("h5",je,[c(p(e.randomData.name)+" ",1),e.randomType==="drink"?(n(),o("span",Ue,p(s.shops[e.randomData.shopId-1]?s.shops[e.randomData.shopId-1].name:""),1)):d("",!0)])]),e.randomType==="drink"?(n(),o("p",Ve,[e.randomData.price.m?(n(),o("span",Fe,[c(" M "),t("span",Me,"$ "+p(e.randomData.price.m),1)])):d("",!0),e.randomData.price.m&&e.randomData.price.l?(n(),o("span",He," ｜ ")):d("",!0),e.randomData.price.l?(n(),o("span",Le,[c(" L "),t("span",Ne,"$ "+p(e.randomData.price.l),1)])):d("",!0)])):d("",!0),f(_,{class:"wheel-result-content-rate rateDisplay-lg hasHandText title-stroke-2",rate:e.randomData.rate},null,8,["rate"])]),_:1},8,["to","style"])])),t("div",Pe,[e.noResult?d("",!0):(n(),o("button",{key:0,type:"button",class:"mb-4 btn-circle bg-accent fs-6 fw-medium",onClick:l[8]||(l[8]=i=>u.randomFn(e.randomType))},[c(" 再轉"),We,c("一次 ")])),f(h,{to:"/wheel",type:"button",class:"btn-circle bg-gray-700 text-white fs-6 fw-medium mb-4 lh-sm"},{default:g(()=>[c(" 重新"),Be,c("選擇 ")]),_:1})])])):d("",!0)])])],2)])}const qe=R(L,[["render",Ke],["__scopeId","data-v-fd515c97"]]);export{qe as default};
