import{y as n,z as p}from"./index-1daaf648.js";const h=n("shopStore",{state:()=>({shops:[{name:""}],singleShop:{drinks:[]},selectType:"全部飲品"}),actions:{getShops(){const e="https://what-to-drink-api-vercel.vercel.app/shops";p.get(e).then(t=>{console.log(t),this.shops=t.data}).catch(t=>{console.log(t)})},getSingleShop(e){const t=`https://what-to-drink-api-vercel.vercel.app/shops?code=${e}&_embed=drinks&_embed=comments`;p.get(t).then(s=>{const[o]=s.data;this.singleShop=o})},getSearchShops(e){const t=`https://what-to-drink-api-vercel.vercel.app/shops?name_like=${e}`;p.get(t).then(s=>{console.log(s),this.shops=s.data}).catch(s=>{console.log(s)})},changeType(e){this.selectType=e}},getters:{drinks(){return[...this.singleShop.drinks]},filterCustomType(){const e=[];return this.drinks.forEach(t=>{e.indexOf(t.type)===-1&&e.push(t.type)}),e.unshift("全部飲品"),e},filterMenu(){const e={};return this.selectType==="全部飲品"?this.drinks.forEach(t=>{if(!Object.prototype.hasOwnProperty.call(e,t.menuType)){const s=t.menuType;e[s]=this.drinks.filter(o=>o.menuType===s)}}):e[this.selectType]=this.drinks.filter(t=>t.type===this.selectType),e},shopRateScore(){const e=this.drinks.map(s=>s.rate).filter(s=>s!==!1);return(e.reduce((s,o)=>Number(s)+Number(o),0)/e.length).toFixed(1)}}});export{h as s};
