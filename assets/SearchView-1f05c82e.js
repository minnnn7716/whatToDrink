import{_ as y,r as p,o as r,c as n,a as s,n as m,F as b,h as w,t as _,b as c,w as h,f as j,p as M,e as U,d as D,i as f,m as x,g as C}from"./index-f2de034b.js";import{d as I}from"./drinkStore-a0d6bb00.js";import{s as $}from"./shopStore-b2b82866.js";import{a as B,S as T}from"./SwitchBtnGroup-39aba163.js";import{_ as L,a as N,b as R,c as E,d as A,e as F,f as V,g as q,h as O,i as z,j as P,k as H,l as J,m as K,n as Q,o as W,p as X,q as Y,r as Z,s as ss,t as es,u as ts,v as os,w as as,x as is,y as rs,z as ns,A as ls,B as cs,C as _s}from"./wheel-nodrink-b3e69524.js";import{R as ds,_ as gs,a as ps,b as ms}from"./RateDisplay-b1327330.js";import{S as hs}from"./SearchTableMode-10e6d78c.js";import"./FavoriteBtn-06578853.js";import"./icon-favorite-active-69e4f444.js";const us="/whatToDrink/assets/icon-sort-down-476a9bd1.svg",vs="/whatToDrink/assets/icon-sort-up-adaa4e9e.svg";const bs={data(){return{listShow:!1,options:{價錢:"price",總評價:"rate"},order:""}},components:{SwitchBtnGroup:B},props:["propsSortSelect"],emits:["sort-select","sort-order"],watch:{listShow(){this.listShow?document.documentElement.style.overflow="hidden":document.documentElement.style.overflow="auto"},order(){this.$emit("sort-order",this.order)}},methods:{toggleList(){this.listShow=!this.listShow},changeSortItem(t){let e=this.propsSortSelect;e===t?e=!1:e=t,this.listShow=!1,this.$emit("sort-select",e)}}},G=t=>(M("data-v-0dce443c"),t=t(),U(),t),fs={class:"sortComponent"},Ss=["src","alt"],ws={class:"sortComponent-list list-unstyled"},ys=["onClick"],ks=G(()=>s("img",{src:us,alt:"遞減","data-name":"down"},null,-1)),Ds=G(()=>s("img",{src:vs,alt:"遞增","data-name":"up"},null,-1));function xs(t,e,l,k,o,d){const u=p("SwitchBtnGroup");return r(),n(b,null,[s("div",fs,[s("button",{type:"button",class:m(["sortComponent-btn btn",{active:l.propsSortSelect}]),onClick:e[0]||(e[0]=(...i)=>d.toggleList&&d.toggleList(...i))},[s("img",{src:`/src/assets/images/icon-sort-${o.order}.svg`,alt:o.order},null,8,Ss)],2),s("div",{class:m(["sortComponent-list-container",{show:o.listShow}])},[s("ul",ws,[(r(!0),n(b,null,w(Object.keys(o.options),i=>(r(),n("li",{key:`sort ${i}`},[s("button",{type:"button",class:m(["sortComponent-list-item",{active:i===l.propsSortSelect}]),onClick:a=>d.changeSortItem([i,o.options[i]])},_(i),11,ys)]))),128)),s("li",null,[c(u,{class:"switchBtnGroup-primary switchBtnGroup-icon-sm",onEmitBtn:e[1]||(e[1]=i=>o.order=i)},{start:h(()=>[ks]),end:h(()=>[Ds]),_:1})])])],2)]),s("div",{class:m(["sortComponent-bg",{show:o.listShow}]),onClick:e[2]||(e[2]=j(i=>o.listShow=!1,["self"]))},null,2)],64)}const Cs=y(bs,[["render",xs],["__scopeId","data-v-0dce443c"]]);const Is={data(){return{imageModeData:[{id:0,shopId:0,name:"",imageUrl:"",price:{m:0,l:0},special:[],caffeine:"",rate:"0.0",shop:{name:"",code:""}}]}},components:{RateDisplay:ds},props:{propsData:{type:Array,default(){return[]}}},watch:{propsData:{handler(){this.imageModeData=this.propsData,console.log("資料變更")},deep:!0,immediate:!0}},methods:{imgUrl(t,e){return new URL(Object.assign({"../assets/images/icon-arrow-end.svg":L,"../assets/images/icon-arrow-start.svg":N,"../assets/images/icon-deco-manyAngleStar.svg":R,"../assets/images/icon-error.svg":E,"../assets/images/icon-favorite-active.svg":A,"../assets/images/icon-favorite.svg":F,"../assets/images/icon-mode-block.svg":V,"../assets/images/icon-mode-list.svg":q,"../assets/images/icon-pin.svg":O,"../assets/images/icon-search.svg":z,"../assets/images/icon-sort-down.svg":P,"../assets/images/icon-sort-up.svg":H,"../assets/images/icon-special-cold.svg":J,"../assets/images/icon-special-fixed.svg":K,"../assets/images/icon-special-hot.svg":Q,"../assets/images/icon-special-noCaffeine.svg":W,"../assets/images/icon-special-recommend.svg":X,"../assets/images/icon-star-empty.svg":gs,"../assets/images/icon-star-full.svg":ps,"../assets/images/icon-star-half.svg":ms,"../assets/images/index-bannerDeco-end.svg":Y,"../assets/images/index-bannerDeco-sm-end.svg":Z,"../assets/images/index-bannerDeco-sm-start.svg":ss,"../assets/images/index-bannerDeco-start.svg":es,"../assets/images/index-wheel-drink.svg":ts,"../assets/images/index-wheel-person.svg":os,"../assets/images/index-wheel-wheel.svg":as,"../assets/images/logo_一沐日.svg":is,"../assets/images/logo_五十嵐.svg":rs,"../assets/images/logo_可不可.svg":ns,"../assets/images/logo_清心福全.svg":ls,"../assets/images/logo_約翰紅茶.svg":cs,"../assets/images/wheel-nodrink.svg":_s})[`../assets/images/${e}${t}.svg`],self.location)},judgeSpecialImg(t){const e={僅限冷飲:"cold",店家推薦:"recommend",無咖啡因:"noCaffeine",僅限熱飲:"hot",固定糖冰:"fixed"};return this.imgUrl(e[t],"icon-special-")}}},$s={class:"row row-cols-3 gx-12 gy-15 list-unstyled"},Bs={class:"searchImage-item-imgSection mb-3"},Gs={class:"searchImage-item-imgContainer"},js=["src","alt"],Ms={class:"searchImage-item-tag"},Us={class:"d-flex align-items-center justify-content-between mb-3"},Ts={class:"fs-4 fw-bold"},Ls={class:"d-flex align-items-center justify-content-between"},Ns={class:"list-unstyled mb-0 d-flex justify-content-center"},Rs=["src","alt"],Es={class:"font-handwriting fs-6 fs-3xl-5 fs-5 fw-bold"},As={key:0},Fs={class:"ms-2"},Vs={key:1},qs={key:2},Os={class:"ms-2"};function zs(t,e,l,k,o,d){const u=p("RouterLink"),i=p("RateDisplay");return r(),n("ul",$s,[(r(!0),n(b,null,w(o.imageModeData,a=>(r(),n("li",{class:"searchImage-item",key:`imageMode ${a.id}`},[c(u,{to:`/drink/${a.id}`},{default:h(()=>[s("div",Bs,[s("div",Gs,[s("img",{class:"searchImage-item-img img-full",src:a.imageUrl,alt:a.name},null,8,js)]),c(u,{to:`/shops/${a.shop.code}`,class:"searchImage-item-tagContainer"},{default:h(()=>[s("span",Ms,_(a.shop.name),1)]),_:2},1032,["to"])]),s("div",Us,[s("h2",Ts,_(a.name),1),c(i,{class:"rateDisplay-sm hasHandText",rate:a.rate},null,8,["rate"])]),s("div",Ls,[s("ul",Ns,[(r(!0),n(b,null,w(a.special,(v,S)=>(r(),n("li",{key:`${a.id} ${v}`},[s("img",{class:m({"me-2":S!=a.special.length}),src:d.judgeSpecialImg(v),alt:v},null,10,Rs)]))),128))]),s("p",Es,[a.price.m?(r(),n("span",As,[D(" M "),s("span",Fs,"$ "+_(a.price.m),1)])):f("",!0),a.price.m&&a.price.l?(r(),n("span",Vs," ｜ ")):f("",!0),a.price.l?(r(),n("span",qs,[D(" L "),s("span",Os,"$ "+_(a.price.l),1)])):f("",!0)])])]),_:2},1032,["to"])]))),128))])}const Ps=y(Is,[["render",zs],["__scopeId","data-v-f7c96390"]]),Hs="/whatToDrink/assets/icon-mode-list-2e48adab.svg",Js="/whatToDrink/assets/icon-mode-block-e17d92fa.svg",Ks="/whatToDrink/assets/icon-error-a1fa950d.svg",Qs={data(){return{display:"table",isGetUrlData:!1,search:{type:"",keyword:""},sort:{select:!1,order:""}}},components:{SearchBar:T,SwitchBtnGroup:B,SortComponent:Cs,SearchImageMode:Ps,SearchTableMode:hs},watch:{$route:"getUrlData",isGetUrlData(){if(!this.isGetUrlData)return;const{keyword:t,type:e}=this.search;this.getSearchDrink(e,t),this.isGetUrlData=!1},shops(){if(!this.shops.length)return;const t=this.joinShopIdPath();this.getSearchDrink(this.search.type,t)},drinks:{handler(){this.judgeSortFn()},deep:!0,immediate:!0},sort:{handler(){this.judgeSortFn()},deep:!0,immediate:!0}},methods:{...x(I,["getSearchDrink","sortData"]),...x($,["getSearchShops"]),getUrlData(){if(this.search.keyword=this.$route.query.keyword,this.search.type=this.$route.query.type,this.search.type==="shops"){this.getSearchShops(this.search.keyword),console.log("搜尋店家!");return}console.log("搜尋飲料!"),this.isGetUrlData=!0},joinShopIdPath(){const t=this.shops.map(l=>l.id);let e="";for(let l=0;l<t.length;l+=1)e+=`shopId=${t[l]}`,l!==t.length-1&&(e+="&");return e},judgeSortFn(){const{order:t,select:e}=this.sort;if(!e){this.sortData(t);return}this.sortData(t,e[1])}},computed:{...C(I,["drinks","sortDrinks"]),...C($,["shops"]),resultNum(){let t=0;return this.drinks&&(t=this.drinks.length),t}},created(){this.getUrlData()}},Ws={class:"container pt-20 pb-10"},Xs={class:"row"},Ys={class:"col-10 col-3xl-12 mx-auto"},Zs={class:"d-flex mb-5"},se=s("span",{"data-name":"drinks"},"飲料",-1),ee=s("span",{"data-name":"shops"},"店家",-1),te=s("img",{src:Hs,alt:"列表模式","data-name":"table"},null,-1),oe=s("img",{src:Js,alt:"圖表模式","data-name":"image"},null,-1),ae={class:"d-flex align-items-center justify-content-between mb-10"},ie={class:"fs-5 fw-bold"},re={class:"fw-bold"},ne={type:"button",class:"btn btn-hoverScale border-0 d-flex align-items-center"};function le(t,e,l,k,o,d){const u=p("SwitchBtnGroup"),i=p("SearchBar"),a=p("SortComponent"),v=p("SearchTableMode"),S=p("SearchImageMode");return r(),n("div",Ws,[s("div",Xs,[s("div",Ys,[s("div",Zs,[c(u,{class:"switchBtnGroup-light switchBtnGroup-text-h100 me-4 border border-black",defaultSelect:o.search.type,onEmitBtn:e[0]||(e[0]=g=>o.search.type=g)},{start:h(()=>[se]),end:h(()=>[ee]),_:1},8,["defaultSelect"]),c(i,{class:"searchBar-border me-3",searchType:o.search.type},null,8,["searchType"]),c(u,{class:"switchBtnGroup-primary switchBtnGroup-icon me-3",onEmitBtn:e[1]||(e[1]=g=>o.display=g)},{start:h(()=>[te]),end:h(()=>[oe]),_:1}),c(a,{propsSortSelect:o.sort.select[0],onSortSelect:e[2]||(e[2]=g=>o.sort.select=g),onSortOrder:e[3]||(e[3]=g=>o.sort.order=g)},null,8,["propsSortSelect"])]),s("div",ae,[s("p",ie," 找到 "+_(d.resultNum)+" 個符合「"+_(o.search.keyword)+"」的飲料 ",1),s("div",{class:m(["w-fit d-flex align-items-center py-1 ps-6 pe-2 bg-accent-300 border border-black rounded-pill transition-ease",{"opacity-0":!o.sort.select}])},[s("p",re," 目前依照「"+_(o.sort.select[0]?o.sort.select[0]:"排序")+"」 "+_(o.sort.order==="up"?"遞增":"遞減")+"排序 ",1),s("button",ne,[s("img",{src:Ks,alt:"關閉",onClick:e[4]||(e[4]=g=>o.sort.select=!1)})])],2)]),d.resultNum?(r(),n(b,{key:0},[s("div",{class:m(["pb-10",{"d-none":o.display!=="table"}])},[c(v,{propsData:t.sortDrinks},null,8,["propsData"])],2),s("div",{class:m(["pb-15",{"d-none":o.display!=="image"}])},[c(S,{propsData:t.sortDrinks},null,8,["propsData"])],2)],64)):f("",!0)])])])}const be=y(Qs,[["render",le]]);export{be as default};
