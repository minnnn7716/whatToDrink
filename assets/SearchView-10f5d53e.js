import{_ as y,r as m,o as r,c as l,a as e,n as p,F as b,h as S,t as g,b as c,w as h,f as _s,p as gs,e as ds,d as D,i as f,m as x,g as C}from"./index-4f588ba5.js";import{d as I}from"./drinkStore-e91f9752.js";import{s as $}from"./shopStore-93e3d564.js";import{a as B,S as ms}from"./SwitchBtnGroup-439d5160.js";import{_ as j,a as G,b as U,c as M,d as T,e as L,f as R,g as N,h as A,i as E,j as F,k as V,l as O,m as q,n as z,o as P,p as H,q as J,r as K,s as Q,t as W,u as X,v as Y,w as Z,x as ss,y as es,z as ts,A as os,B as as,C as is}from"./wheel-nodrink-b3e69524.js";import{_ as ns,a as rs,b as ls,R as ps}from"./RateDisplay-f2e84f8c.js";import{S as hs}from"./SearchTableMode-98f3a6ce.js";import"./FavoriteBtn-e0fc56f6.js";import"./icon-favorite-active-69e4f444.js";const vs="/whatToDrink/assets/icon-sort-down-476a9bd1.svg",us="/whatToDrink/assets/icon-sort-up-adaa4e9e.svg";const bs={data(){return{listShow:!1,options:{價錢:"price",總評價:"rate"},order:""}},components:{SwitchBtnGroup:B},props:["propsSortSelect"],emits:["sort-select","sort-order"],watch:{listShow(){this.listShow?document.documentElement.style.overflow="hidden":document.documentElement.style.overflow="auto"},order(){this.$emit("sort-order",this.order)}},methods:{toggleList(){this.listShow=!this.listShow},changeSortItem(t){let s=this.propsSortSelect;s===t?s=!1:s=t,this.listShow=!1,this.$emit("sort-select",s)},imgUrl(t,s){return new URL(Object.assign({"../assets/images/icon-arrow-end.svg":j,"../assets/images/icon-arrow-start.svg":G,"../assets/images/icon-deco-manyAngleStar.svg":U,"../assets/images/icon-error.svg":M,"../assets/images/icon-favorite-active.svg":T,"../assets/images/icon-favorite.svg":L,"../assets/images/icon-mode-block.svg":R,"../assets/images/icon-mode-list.svg":N,"../assets/images/icon-pin.svg":A,"../assets/images/icon-search.svg":E,"../assets/images/icon-sort-down.svg":F,"../assets/images/icon-sort-up.svg":V,"../assets/images/icon-special-cold.svg":O,"../assets/images/icon-special-fixed.svg":q,"../assets/images/icon-special-hot.svg":z,"../assets/images/icon-special-noCaffeine.svg":P,"../assets/images/icon-special-recommend.svg":H,"../assets/images/icon-star-empty.svg":ns,"../assets/images/icon-star-full.svg":rs,"../assets/images/icon-star-half.svg":ls,"../assets/images/index-bannerDeco-end.svg":J,"../assets/images/index-bannerDeco-sm-end.svg":K,"../assets/images/index-bannerDeco-sm-start.svg":Q,"../assets/images/index-bannerDeco-start.svg":W,"../assets/images/index-wheel-drink.svg":X,"../assets/images/index-wheel-person.svg":Y,"../assets/images/index-wheel-wheel.svg":Z,"../assets/images/logo_一沐日.svg":ss,"../assets/images/logo_五十嵐.svg":es,"../assets/images/logo_可不可.svg":ts,"../assets/images/logo_清心福全.svg":os,"../assets/images/logo_約翰紅茶.svg":as,"../assets/images/wheel-nodrink.svg":is})[`../assets/images/${s}${t}.svg`],self.location)}}},cs=t=>(gs("data-v-0c96dd06"),t=t(),ds(),t),fs={class:"sortComponent"},ws=["src","alt"],Ss={class:"sortComponent-list list-unstyled"},ys=["onClick"],ks=cs(()=>e("img",{src:vs,alt:"遞減","data-name":"down"},null,-1)),Ds=cs(()=>e("img",{src:us,alt:"遞增","data-name":"up"},null,-1));function xs(t,s,n,k,o,_){const v=m("SwitchBtnGroup");return r(),l(b,null,[e("div",fs,[e("button",{type:"button",class:p(["sortComponent-btn btn",{active:n.propsSortSelect}]),onClick:s[0]||(s[0]=(...i)=>_.toggleList&&_.toggleList(...i))},[e("img",{src:_.imgUrl(o.order,"icon-sort-"),alt:o.order},null,8,ws)],2),e("div",{class:p(["sortComponent-list-container",{show:o.listShow}])},[e("ul",Ss,[(r(!0),l(b,null,S(Object.keys(o.options),i=>(r(),l("li",{key:`sort ${i}`},[e("button",{type:"button",class:p(["sortComponent-list-item",{active:i===n.propsSortSelect}]),onClick:a=>_.changeSortItem([i,o.options[i]])},g(i),11,ys)]))),128)),e("li",null,[c(v,{class:"switchBtnGroup-primary switchBtnGroup-icon-sm",onEmitBtn:s[1]||(s[1]=i=>o.order=i)},{start:h(()=>[ks]),end:h(()=>[Ds]),_:1})])])],2)]),e("div",{class:p(["sortComponent-bg",{show:o.listShow}]),onClick:s[2]||(s[2]=_s(i=>o.listShow=!1,["self"]))},null,2)],64)}const Cs=y(bs,[["render",xs],["__scopeId","data-v-0c96dd06"]]);const Is={data(){return{imageModeData:[{id:0,shopId:0,name:"",imageUrl:"",price:{m:0,l:0},special:[],caffeine:"",rate:"0.0",shop:{name:"",code:""}}]}},components:{RateDisplay:ps},props:{propsData:{type:Array,default(){return[]}}},watch:{propsData:{handler(){this.imageModeData=this.propsData,console.log("資料變更")},deep:!0,immediate:!0}},methods:{imgUrl(t,s){return new URL(Object.assign({"../assets/images/icon-arrow-end.svg":j,"../assets/images/icon-arrow-start.svg":G,"../assets/images/icon-deco-manyAngleStar.svg":U,"../assets/images/icon-error.svg":M,"../assets/images/icon-favorite-active.svg":T,"../assets/images/icon-favorite.svg":L,"../assets/images/icon-mode-block.svg":R,"../assets/images/icon-mode-list.svg":N,"../assets/images/icon-pin.svg":A,"../assets/images/icon-search.svg":E,"../assets/images/icon-sort-down.svg":F,"../assets/images/icon-sort-up.svg":V,"../assets/images/icon-special-cold.svg":O,"../assets/images/icon-special-fixed.svg":q,"../assets/images/icon-special-hot.svg":z,"../assets/images/icon-special-noCaffeine.svg":P,"../assets/images/icon-special-recommend.svg":H,"../assets/images/icon-star-empty.svg":ns,"../assets/images/icon-star-full.svg":rs,"../assets/images/icon-star-half.svg":ls,"../assets/images/index-bannerDeco-end.svg":J,"../assets/images/index-bannerDeco-sm-end.svg":K,"../assets/images/index-bannerDeco-sm-start.svg":Q,"../assets/images/index-bannerDeco-start.svg":W,"../assets/images/index-wheel-drink.svg":X,"../assets/images/index-wheel-person.svg":Y,"../assets/images/index-wheel-wheel.svg":Z,"../assets/images/logo_一沐日.svg":ss,"../assets/images/logo_五十嵐.svg":es,"../assets/images/logo_可不可.svg":ts,"../assets/images/logo_清心福全.svg":os,"../assets/images/logo_約翰紅茶.svg":as,"../assets/images/wheel-nodrink.svg":is})[`../assets/images/${s}${t}.svg`],self.location)},judgeSpecialImg(t){const s={僅限冷飲:"cold",店家推薦:"recommend",無咖啡因:"noCaffeine",僅限熱飲:"hot",固定糖冰:"fixed"};return this.imgUrl(s[t],"icon-special-")}}},$s={class:"row row-cols-3 gx-12 gy-15 list-unstyled"},Bs={class:"searchImage-item-imgSection mb-3"},js={class:"searchImage-item-imgContainer"},Gs=["src","alt"],Us={class:"searchImage-item-tag"},Ms={class:"d-flex align-items-center justify-content-between mb-3"},Ts={class:"fs-4 fw-bold"},Ls={class:"d-flex align-items-center justify-content-between"},Rs={class:"list-unstyled mb-0 d-flex justify-content-center"},Ns=["src","alt"],As={class:"font-handwriting fs-6 fs-3xl-5 fs-5 fw-bold"},Es={key:0},Fs={class:"ms-2"},Vs={key:1},Os={key:2},qs={class:"ms-2"};function zs(t,s,n,k,o,_){const v=m("RouterLink"),i=m("RateDisplay");return r(),l("ul",$s,[(r(!0),l(b,null,S(o.imageModeData,a=>(r(),l("li",{class:"searchImage-item",key:`imageMode ${a.id}`},[c(v,{to:`/drink/${a.id}`},{default:h(()=>[e("div",Bs,[e("div",js,[e("img",{class:"searchImage-item-img img-full",src:a.imageUrl,alt:a.name},null,8,Gs)]),c(v,{to:`/shops/${a.shop.code}`,class:"searchImage-item-tagContainer"},{default:h(()=>[e("span",Us,g(a.shop.name),1)]),_:2},1032,["to"])]),e("div",Ms,[e("h2",Ts,g(a.name),1),c(i,{class:"rateDisplay-sm hasHandText",rate:a.rate},null,8,["rate"])]),e("div",Ls,[e("ul",Rs,[(r(!0),l(b,null,S(a.special,(u,w)=>(r(),l("li",{key:`${a.id} ${u}`},[e("img",{class:p({"me-2":w!=a.special.length}),src:_.judgeSpecialImg(u),alt:u},null,10,Ns)]))),128))]),e("p",As,[a.price.m?(r(),l("span",Es,[D(" M "),e("span",Fs,"$ "+g(a.price.m),1)])):f("",!0),a.price.m&&a.price.l?(r(),l("span",Vs," ｜ ")):f("",!0),a.price.l?(r(),l("span",Os,[D(" L "),e("span",qs,"$ "+g(a.price.l),1)])):f("",!0)])])]),_:2},1032,["to"])]))),128))])}const Ps=y(Is,[["render",zs],["__scopeId","data-v-f7c96390"]]),Hs="/whatToDrink/assets/icon-mode-list-2e48adab.svg",Js="/whatToDrink/assets/icon-mode-block-e17d92fa.svg",Ks="/whatToDrink/assets/icon-error-a1fa950d.svg",Qs={data(){return{display:"table",isGetUrlData:!1,search:{type:"",keyword:""},sort:{select:!1,order:""}}},components:{SearchBar:ms,SwitchBtnGroup:B,SortComponent:Cs,SearchImageMode:Ps,SearchTableMode:hs},watch:{$route:"getUrlData",isGetUrlData(){if(!this.isGetUrlData)return;const{keyword:t,type:s}=this.search;this.getSearchDrink(s,t),this.isGetUrlData=!1},shops(){if(!this.shops.length)return;const t=this.joinShopIdPath();this.getSearchDrink(this.search.type,t)},drinks:{handler(){this.judgeSortFn()},deep:!0,immediate:!0},sort:{handler(){this.judgeSortFn()},deep:!0,immediate:!0}},methods:{...x(I,["getSearchDrink","sortData"]),...x($,["getSearchShops"]),getUrlData(){if(this.search.keyword=this.$route.query.keyword,this.search.type=this.$route.query.type,this.search.type==="shops"){this.getSearchShops(this.search.keyword),console.log("搜尋店家!");return}console.log("搜尋飲料!"),this.isGetUrlData=!0},joinShopIdPath(){const t=this.shops.map(n=>n.id);let s="";for(let n=0;n<t.length;n+=1)s+=`shopId=${t[n]}`,n!==t.length-1&&(s+="&");return s},judgeSortFn(){const{order:t,select:s}=this.sort;if(!s){this.sortData(t);return}this.sortData(t,s[1])}},computed:{...C(I,["drinks","sortDrinks"]),...C($,["shops"]),resultNum(){let t=0;return this.drinks&&(t=this.drinks.length),t}},created(){this.getUrlData()}},Ws={class:"container pt-20 pb-10"},Xs={class:"row"},Ys={class:"col-10 col-3xl-12 mx-auto"},Zs={class:"d-flex mb-5"},se=e("span",{"data-name":"drinks"},"飲料",-1),ee=e("span",{"data-name":"shops"},"店家",-1),te=e("img",{src:Hs,alt:"列表模式","data-name":"table"},null,-1),oe=e("img",{src:Js,alt:"圖表模式","data-name":"image"},null,-1),ae={class:"d-flex align-items-center justify-content-between mb-10"},ie={class:"fs-5 fw-bold"},ne={class:"fw-bold"},re={type:"button",class:"btn btn-hoverScale border-0 d-flex align-items-center"};function le(t,s,n,k,o,_){const v=m("SwitchBtnGroup"),i=m("SearchBar"),a=m("SortComponent"),u=m("SearchTableMode"),w=m("SearchImageMode");return r(),l("div",Ws,[e("div",Xs,[e("div",Ys,[e("div",Zs,[c(v,{class:"switchBtnGroup-light switchBtnGroup-text-h100 me-4 border border-black",defaultSelect:o.search.type,onEmitBtn:s[0]||(s[0]=d=>o.search.type=d)},{start:h(()=>[se]),end:h(()=>[ee]),_:1},8,["defaultSelect"]),c(i,{class:"searchBar-border me-3",searchType:o.search.type},null,8,["searchType"]),c(v,{class:"switchBtnGroup-primary switchBtnGroup-icon me-3",onEmitBtn:s[1]||(s[1]=d=>o.display=d)},{start:h(()=>[te]),end:h(()=>[oe]),_:1}),c(a,{propsSortSelect:o.sort.select[0],onSortSelect:s[2]||(s[2]=d=>o.sort.select=d),onSortOrder:s[3]||(s[3]=d=>o.sort.order=d)},null,8,["propsSortSelect"])]),e("div",ae,[e("p",ie," 找到 "+g(_.resultNum)+" 個符合「"+g(o.search.keyword)+"」的飲料 ",1),e("div",{class:p(["w-fit d-flex align-items-center py-1 ps-6 pe-2 bg-accent-300 border border-black rounded-pill transition-ease",{"opacity-0":!o.sort.select}])},[e("p",ne," 目前依照「"+g(o.sort.select[0]?o.sort.select[0]:"排序")+"」 "+g(o.sort.order==="up"?"遞增":"遞減")+"排序 ",1),e("button",re,[e("img",{src:Ks,alt:"關閉",onClick:s[4]||(s[4]=d=>o.sort.select=!1)})])],2)]),_.resultNum?(r(),l(b,{key:0},[e("div",{class:p(["pb-10",{"d-none":o.display!=="table"}])},[c(u,{propsData:t.sortDrinks},null,8,["propsData"])],2),e("div",{class:p(["pb-15",{"d-none":o.display!=="image"}])},[c(w,{propsData:t.sortDrinks},null,8,["propsData"])],2)],64)):f("",!0)])])])}const be=y(Qs,[["render",le]]);export{be as default};
