import{_ as y,r as d,o as r,c as l,a as e,n as p,F as b,h as S,t as g,d as c,e as h,w as ds,p as ps,f as hs,b as D,i as f,m as x,g as C}from"./index-d47984e8.js";import{d as I}from"./drinkStore-c1ea12ce.js";import{s as $}from"./shopStore-2e512a5a.js";import{a as B,S as vs}from"./SwitchBtnGroup-71f526a4.js";import{_ as j,a as G,b as U,c as M,d as T,e as L,f as R,g as E,h as N,i as A,j as F,k as V,l as O,m as q,n as z,o as P,p as H,q as J,r as K,s as Q,t as W,u as X,v as Y,w as Z,x as ss,y as es,z as ts,A as os,B as as,C as is,D as ns,E as rs,F as ls}from"./wheel-nodrink-4946c711.js";import{_ as cs,a as _s,b as gs,R as us}from"./RateDisplay-8d9c29b6.js";import{S as bs}from"./SearchTableMode-2ff50482.js";import"./FavoriteBtn-1121ce4a.js";import"./icon-favorite-active-69e4f444.js";const fs="/whatToDrink/assets/icon-sort-down-476a9bd1.svg",ws="/whatToDrink/assets/icon-sort-up-adaa4e9e.svg";const Ss={data(){return{listShow:!1,options:{價錢:"price",總評價:"rate"},order:""}},components:{SwitchBtnGroup:B},props:["propsSortSelect"],emits:["sort-select","sort-order"],watch:{listShow(){this.listShow?document.documentElement.style.overflow="hidden":document.documentElement.style.overflow="auto"},order(){this.$emit("sort-order",this.order)}},methods:{toggleList(){this.listShow=!this.listShow},changeSortItem(t){let s=this.propsSortSelect;s===t?s=!1:s=t,this.listShow=!1,this.$emit("sort-select",s)},imgUrl(t,s){return new URL(Object.assign({"../assets/images/icon-arrow-end.svg":j,"../assets/images/icon-arrow-start.svg":G,"../assets/images/icon-deco-manyAngleStar.svg":U,"../assets/images/icon-error.svg":M,"../assets/images/icon-favorite-active.svg":T,"../assets/images/icon-favorite.svg":L,"../assets/images/icon-mode-block.svg":R,"../assets/images/icon-mode-list.svg":E,"../assets/images/icon-nav-active.svg":N,"../assets/images/icon-pin.svg":A,"../assets/images/icon-search.svg":F,"../assets/images/icon-sort-down.svg":V,"../assets/images/icon-sort-up.svg":O,"../assets/images/icon-special-cold.svg":q,"../assets/images/icon-special-fixed.svg":z,"../assets/images/icon-special-hot.svg":P,"../assets/images/icon-special-noCaffeine.svg":H,"../assets/images/icon-special-recommend.svg":J,"../assets/images/icon-star-empty.svg":cs,"../assets/images/icon-star-full.svg":_s,"../assets/images/icon-star-half.svg":gs,"../assets/images/index-bannerDeco-end.svg":K,"../assets/images/index-bannerDeco-sm-end.svg":Q,"../assets/images/index-bannerDeco-sm-start.svg":W,"../assets/images/index-bannerDeco-start.svg":X,"../assets/images/index-wheel-drink-sm.svg":Y,"../assets/images/index-wheel-drink.svg":Z,"../assets/images/index-wheel-person.svg":ss,"../assets/images/index-wheel-wheel-sm.svg":es,"../assets/images/index-wheel-wheel.svg":ts,"../assets/images/logo_一沐日.svg":os,"../assets/images/logo_五十嵐.svg":as,"../assets/images/logo_可不可.svg":is,"../assets/images/logo_清心福全.svg":ns,"../assets/images/logo_約翰紅茶.svg":rs,"../assets/images/wheel-nodrink.svg":ls})[`../assets/images/${s}${t}.svg`],self.location)}}},ms=t=>(ps("data-v-0c96dd06"),t=t(),hs(),t),ys={class:"sortComponent"},ks=["src","alt"],Ds={class:"sortComponent-list list-unstyled"},xs=["onClick"],Cs=ms(()=>e("img",{src:fs,alt:"遞減","data-name":"down"},null,-1)),Is=ms(()=>e("img",{src:ws,alt:"遞增","data-name":"up"},null,-1));function $s(t,s,n,k,o,_){const v=d("SwitchBtnGroup");return r(),l(b,null,[e("div",ys,[e("button",{type:"button",class:p(["sortComponent-btn btn",{active:n.propsSortSelect}]),onClick:s[0]||(s[0]=(...i)=>_.toggleList&&_.toggleList(...i))},[e("img",{src:_.imgUrl(o.order,"icon-sort-"),alt:o.order},null,8,ks)],2),e("div",{class:p(["sortComponent-list-container",{show:o.listShow}])},[e("ul",Ds,[(r(!0),l(b,null,S(Object.keys(o.options),i=>(r(),l("li",{key:`sort ${i}`},[e("button",{type:"button",class:p(["sortComponent-list-item",{active:i===n.propsSortSelect}]),onClick:a=>_.changeSortItem([i,o.options[i]])},g(i),11,xs)]))),128)),e("li",null,[c(v,{class:"switchBtnGroup-primary switchBtnGroup-icon-sm",onEmitBtn:s[1]||(s[1]=i=>o.order=i)},{start:h(()=>[Cs]),end:h(()=>[Is]),_:1})])])],2)]),e("div",{class:p(["sortComponent-bg",{show:o.listShow}]),onClick:s[2]||(s[2]=ds(i=>o.listShow=!1,["self"]))},null,2)],64)}const Bs=y(Ss,[["render",$s],["__scopeId","data-v-0c96dd06"]]);const js={data(){return{imageModeData:[{id:0,shopId:0,name:"",imageUrl:"",price:{m:0,l:0},special:[],caffeine:"",rate:"0.0",shop:{name:"",code:""}}]}},components:{RateDisplay:us},props:{propsData:{type:Array,default(){return[]}}},watch:{propsData:{handler(){this.imageModeData=this.propsData,console.log("資料變更")},deep:!0,immediate:!0}},methods:{imgUrl(t,s){return new URL(Object.assign({"../assets/images/icon-arrow-end.svg":j,"../assets/images/icon-arrow-start.svg":G,"../assets/images/icon-deco-manyAngleStar.svg":U,"../assets/images/icon-error.svg":M,"../assets/images/icon-favorite-active.svg":T,"../assets/images/icon-favorite.svg":L,"../assets/images/icon-mode-block.svg":R,"../assets/images/icon-mode-list.svg":E,"../assets/images/icon-nav-active.svg":N,"../assets/images/icon-pin.svg":A,"../assets/images/icon-search.svg":F,"../assets/images/icon-sort-down.svg":V,"../assets/images/icon-sort-up.svg":O,"../assets/images/icon-special-cold.svg":q,"../assets/images/icon-special-fixed.svg":z,"../assets/images/icon-special-hot.svg":P,"../assets/images/icon-special-noCaffeine.svg":H,"../assets/images/icon-special-recommend.svg":J,"../assets/images/icon-star-empty.svg":cs,"../assets/images/icon-star-full.svg":_s,"../assets/images/icon-star-half.svg":gs,"../assets/images/index-bannerDeco-end.svg":K,"../assets/images/index-bannerDeco-sm-end.svg":Q,"../assets/images/index-bannerDeco-sm-start.svg":W,"../assets/images/index-bannerDeco-start.svg":X,"../assets/images/index-wheel-drink-sm.svg":Y,"../assets/images/index-wheel-drink.svg":Z,"../assets/images/index-wheel-person.svg":ss,"../assets/images/index-wheel-wheel-sm.svg":es,"../assets/images/index-wheel-wheel.svg":ts,"../assets/images/logo_一沐日.svg":os,"../assets/images/logo_五十嵐.svg":as,"../assets/images/logo_可不可.svg":is,"../assets/images/logo_清心福全.svg":ns,"../assets/images/logo_約翰紅茶.svg":rs,"../assets/images/wheel-nodrink.svg":ls})[`../assets/images/${s}${t}.svg`],self.location)},judgeSpecialImg(t){const s={僅限冷飲:"cold",店家推薦:"recommend",無咖啡因:"noCaffeine",僅限熱飲:"hot",固定糖冰:"fixed"};return this.imgUrl(s[t],"icon-special-")}}},Gs={class:"row row-cols-3 gx-12 gy-15 list-unstyled"},Us={class:"searchImage-item-imgSection mb-3"},Ms={class:"searchImage-item-imgContainer"},Ts=["src","alt"],Ls={class:"searchImage-item-tag"},Rs={class:"d-flex align-items-center justify-content-between mb-3"},Es={class:"fs-4 fw-bold"},Ns={class:"d-flex align-items-center justify-content-between"},As={class:"list-unstyled mb-0 d-flex justify-content-center"},Fs=["src","alt"],Vs={class:"font-handwriting fs-6 fs-3xl-5 fs-5 fw-bold"},Os={key:0},qs={class:"ms-2"},zs={key:1},Ps={key:2},Hs={class:"ms-2"};function Js(t,s,n,k,o,_){const v=d("RouterLink"),i=d("RateDisplay");return r(),l("ul",Gs,[(r(!0),l(b,null,S(o.imageModeData,a=>(r(),l("li",{class:"searchImage-item",key:`imageMode ${a.id}`},[c(v,{to:`/drink/${a.id}`},{default:h(()=>[e("div",Us,[e("div",Ms,[e("img",{class:"searchImage-item-img img-full",src:a.imageUrl,alt:a.name},null,8,Ts)]),c(v,{to:`/shops/${a.shop.code}`,class:"searchImage-item-tagContainer"},{default:h(()=>[e("span",Ls,g(a.shop.name),1)]),_:2},1032,["to"])]),e("div",Rs,[e("h2",Es,g(a.name),1),c(i,{class:"rateDisplay-sm hasHandText",rate:a.rate},null,8,["rate"])]),e("div",Ns,[e("ul",As,[(r(!0),l(b,null,S(a.special,(u,w)=>(r(),l("li",{key:`${a.id} ${u}`},[e("img",{class:p({"me-2":w!=a.special.length}),src:_.judgeSpecialImg(u),alt:u},null,10,Fs)]))),128))]),e("p",Vs,[a.price.m?(r(),l("span",Os,[D(" M "),e("span",qs,"$ "+g(a.price.m),1)])):f("",!0),a.price.m&&a.price.l?(r(),l("span",zs," ｜ ")):f("",!0),a.price.l?(r(),l("span",Ps,[D(" L "),e("span",Hs,"$ "+g(a.price.l),1)])):f("",!0)])])]),_:2},1032,["to"])]))),128))])}const Ks=y(js,[["render",Js],["__scopeId","data-v-f7c96390"]]),Qs="/whatToDrink/assets/icon-mode-list-2e48adab.svg",Ws="/whatToDrink/assets/icon-mode-block-e17d92fa.svg",Xs="/whatToDrink/assets/icon-error-a1fa950d.svg",Ys={data(){return{display:"table",isGetUrlData:!1,search:{type:"",keyword:""},sort:{select:!1,order:""}}},components:{SearchBar:vs,SwitchBtnGroup:B,SortComponent:Bs,SearchImageMode:Ks,SearchTableMode:bs},watch:{$route:"getUrlData",isGetUrlData(){if(!this.isGetUrlData)return;const{keyword:t,type:s}=this.search;this.getSearchDrink(s,t),this.isGetUrlData=!1},shops(){if(!this.shops.length)return;const t=this.joinShopIdPath();this.getSearchDrink(this.search.type,t)},drinks:{handler(){this.judgeSortFn()},deep:!0,immediate:!0},sort:{handler(){this.judgeSortFn()},deep:!0,immediate:!0}},methods:{...x(I,["getSearchDrink","sortData"]),...x($,["getSearchShops"]),getUrlData(){if(this.search.keyword=this.$route.query.keyword,this.search.type=this.$route.query.type,this.search.type==="shops"){this.getSearchShops(this.search.keyword),console.log("搜尋店家!");return}console.log("搜尋飲料!"),this.isGetUrlData=!0},joinShopIdPath(){const t=this.shops.map(n=>n.id);let s="";for(let n=0;n<t.length;n+=1)s+=`shopId=${t[n]}`,n!==t.length-1&&(s+="&");return s},judgeSortFn(){const{order:t,select:s}=this.sort;if(!s){this.sortData(t);return}this.sortData(t,s[1])}},computed:{...C(I,["drinks","sortDrinks"]),...C($,["shops"]),resultNum(){let t=0;return this.drinks&&(t=this.drinks.length),t}},created(){this.getUrlData()}},Zs={class:"container pt-20 pb-10"},se={class:"row"},ee={class:"col-10 col-3xl-12 mx-auto"},te={class:"d-flex mb-5"},oe=e("span",{"data-name":"drinks"},"飲料",-1),ae=e("span",{"data-name":"shops"},"店家",-1),ie=e("img",{src:Qs,alt:"列表模式","data-name":"table"},null,-1),ne=e("img",{src:Ws,alt:"圖表模式","data-name":"image"},null,-1),re={class:"d-flex align-items-center justify-content-between mb-10"},le={class:"fs-5 fw-bold"},ce={class:"fw-bold"},_e={type:"button",class:"btn btn-hoverScale border-0 d-flex align-items-center"};function ge(t,s,n,k,o,_){const v=d("SwitchBtnGroup"),i=d("SearchBar"),a=d("SortComponent"),u=d("SearchTableMode"),w=d("SearchImageMode");return r(),l("div",Zs,[e("div",se,[e("div",ee,[e("div",te,[c(v,{class:"switchBtnGroup-light switchBtnGroup-text-h100 me-4 border border-black",defaultSelect:o.search.type,onEmitBtn:s[0]||(s[0]=m=>o.search.type=m)},{start:h(()=>[oe]),end:h(()=>[ae]),_:1},8,["defaultSelect"]),c(i,{class:"searchBar-border me-3",searchType:o.search.type},null,8,["searchType"]),c(v,{class:"switchBtnGroup-primary switchBtnGroup-icon me-3",onEmitBtn:s[1]||(s[1]=m=>o.display=m)},{start:h(()=>[ie]),end:h(()=>[ne]),_:1}),c(a,{propsSortSelect:o.sort.select[0],onSortSelect:s[2]||(s[2]=m=>o.sort.select=m),onSortOrder:s[3]||(s[3]=m=>o.sort.order=m)},null,8,["propsSortSelect"])]),e("div",re,[e("p",le," 找到 "+g(_.resultNum)+" 個符合「"+g(o.search.keyword)+"」的飲料 ",1),e("div",{class:p(["w-fit d-flex align-items-center py-1 ps-6 pe-2 bg-accent-300 border border-black rounded-pill transition-ease",{"opacity-0":!o.sort.select}])},[e("p",ce," 目前依照「"+g(o.sort.select[0]?o.sort.select[0]:"排序")+"」 "+g(o.sort.order==="up"?"遞增":"遞減")+"排序 ",1),e("button",_e,[e("img",{src:Xs,alt:"關閉",onClick:s[4]||(s[4]=m=>o.sort.select=!1)})])],2)]),_.resultNum?(r(),l(b,{key:0},[e("div",{class:p(["pb-10",{"d-none":o.display!=="table"}])},[c(u,{propsData:t.sortDrinks},null,8,["propsData"])],2),e("div",{class:p(["pb-15",{"d-none":o.display!=="image"}])},[c(w,{propsData:t.sortDrinks},null,8,["propsData"])],2)],64)):f("",!0)])])])}const Se=y(Ys,[["render",ge]]);export{Se as default};
