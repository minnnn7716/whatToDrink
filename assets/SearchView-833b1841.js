import{_ as y,r as d,o as r,c as l,a as e,n as p,F as b,h as S,t as g,d as c,e as h,w as vs,p as us,f as bs,b as x,g as f,m as D,j as C}from"./index-3f064a97.js";import{d as I}from"./drinkStore-50e9101e.js";import{s as $}from"./shopStore-2c560ecb.js";import{a as B,S as fs}from"./SwitchBtnGroup-7a32486d.js";import{_ as j,a as G,b as U,c as M,d as T,e as L,f as R,g as E,h as N,i as A,j as F,k as V,l as O,m as q,n as z,o as H,p as P,q as J,r as K,s as Q,t as W,u as X,v as Y,w as Z,x as ss,y as es,z as ts,A as os,B as as,C as is,D as ns,E as rs,F as ls,G as cs,H as _s,I as gs}from"./wheel-nodrink-cdfd1680.js";import{_ as ms,a as ds,b as ps,R as ws}from"./RateDisplay-a5a9e4f7.js";import{S as Ss}from"./SearchTableMode-60884f27.js";import"./FavoriteBtn-55c55fb6.js";import"./icon-favorite-active-69e4f444.js";const ys="/whatToDrink/assets/icon-sort-down-476a9bd1.svg",ks="/whatToDrink/assets/icon-sort-up-adaa4e9e.svg";const xs={data(){return{listShow:!1,options:{價錢:"price",總評價:"rate"},order:""}},components:{SwitchBtnGroup:B},props:["propsSortSelect"],emits:["sort-select","sort-order"],watch:{listShow(){this.listShow?document.documentElement.style.overflow="hidden":document.documentElement.style.overflow="auto"},order(){this.$emit("sort-order",this.order)}},methods:{toggleList(){this.listShow=!this.listShow},changeSortItem(t){let s=this.propsSortSelect;s===t?s=!1:s=t,this.listShow=!1,this.$emit("sort-select",s)},imgUrl(t,s){return new URL(Object.assign({"../assets/images/about-message.svg":j,"../assets/images/about-wheel.svg":G,"../assets/images/icon-arrow-end.svg":U,"../assets/images/icon-arrow-start.svg":M,"../assets/images/icon-deco-manyAngleStar.svg":T,"../assets/images/icon-error.svg":L,"../assets/images/icon-favorite-active.svg":R,"../assets/images/icon-favorite.svg":E,"../assets/images/icon-mode-block.svg":N,"../assets/images/icon-mode-list.svg":A,"../assets/images/icon-nav-active.svg":F,"../assets/images/icon-pin.svg":V,"../assets/images/icon-search.svg":O,"../assets/images/icon-sort-down.svg":q,"../assets/images/icon-sort-up.svg":z,"../assets/images/icon-special-cold.svg":H,"../assets/images/icon-special-fixed.svg":P,"../assets/images/icon-special-hot.svg":J,"../assets/images/icon-special-limited.svg":K,"../assets/images/icon-special-noCaffeine.svg":Q,"../assets/images/icon-special-recommend.svg":W,"../assets/images/icon-star-empty.svg":ms,"../assets/images/icon-star-full.svg":ds,"../assets/images/icon-star-half.svg":ps,"../assets/images/index-bannerDeco-end.svg":X,"../assets/images/index-bannerDeco-sm-end.svg":Y,"../assets/images/index-bannerDeco-sm-start.svg":Z,"../assets/images/index-bannerDeco-start.svg":ss,"../assets/images/index-wheel-drink-sm.svg":es,"../assets/images/index-wheel-drink.svg":ts,"../assets/images/index-wheel-person.svg":os,"../assets/images/index-wheel-wheel-sm.svg":as,"../assets/images/index-wheel-wheel.svg":is,"../assets/images/logo_一沐日.svg":ns,"../assets/images/logo_五十嵐.svg":rs,"../assets/images/logo_可不可.svg":ls,"../assets/images/logo_清心福全.svg":cs,"../assets/images/logo_約翰紅茶.svg":_s,"../assets/images/wheel-nodrink.svg":gs})[`../assets/images/${s}${t}.svg`],self.location)}}},hs=t=>(us("data-v-0001c523"),t=t(),bs(),t),Ds={class:"sortComponent"},Cs=["src","alt"],Is={class:"sortComponent-list list-unstyled"},$s=["onClick"],Bs=hs(()=>e("img",{src:ys,alt:"遞減","data-name":"down"},null,-1)),js=hs(()=>e("img",{src:ks,alt:"遞增","data-name":"up"},null,-1));function Gs(t,s,n,k,o,_){const v=d("SwitchBtnGroup");return r(),l(b,null,[e("div",Ds,[e("button",{type:"button",class:p(["sortComponent-btn btn",{active:n.propsSortSelect}]),onClick:s[0]||(s[0]=(...i)=>_.toggleList&&_.toggleList(...i))},[e("img",{src:_.imgUrl(o.order,"icon-sort-"),alt:o.order},null,8,Cs)],2),e("div",{class:p(["sortComponent-list-container",{show:o.listShow}])},[e("ul",Is,[(r(!0),l(b,null,S(Object.keys(o.options),i=>(r(),l("li",{key:`sort ${i}`},[e("button",{type:"button",class:p(["sortComponent-list-item",{active:i===n.propsSortSelect}]),onClick:a=>_.changeSortItem([i,o.options[i]])},g(i),11,$s)]))),128)),e("li",null,[c(v,{class:"switchBtnGroup-primary switchBtnGroup-icon-sm",onEmitBtn:s[1]||(s[1]=i=>o.order=i)},{start:h(()=>[Bs]),end:h(()=>[js]),_:1})])])],2)]),e("div",{class:p(["sortComponent-bg",{show:o.listShow}]),onClick:s[2]||(s[2]=vs(i=>o.listShow=!1,["self"]))},null,2)],64)}const Us=y(xs,[["render",Gs],["__scopeId","data-v-0001c523"]]);const Ms={data(){return{imageModeData:[{id:0,shopId:0,name:"",imageUrl:"",price:{m:0,l:0},special:[],caffeine:"",rate:"0.0",shop:{name:"",code:""}}]}},components:{RateDisplay:ws},props:{propsData:{type:Array,default(){return[]}}},watch:{propsData:{handler(){this.imageModeData=this.propsData},deep:!0,immediate:!0}},methods:{imgUrl(t,s){return new URL(Object.assign({"../assets/images/about-message.svg":j,"../assets/images/about-wheel.svg":G,"../assets/images/icon-arrow-end.svg":U,"../assets/images/icon-arrow-start.svg":M,"../assets/images/icon-deco-manyAngleStar.svg":T,"../assets/images/icon-error.svg":L,"../assets/images/icon-favorite-active.svg":R,"../assets/images/icon-favorite.svg":E,"../assets/images/icon-mode-block.svg":N,"../assets/images/icon-mode-list.svg":A,"../assets/images/icon-nav-active.svg":F,"../assets/images/icon-pin.svg":V,"../assets/images/icon-search.svg":O,"../assets/images/icon-sort-down.svg":q,"../assets/images/icon-sort-up.svg":z,"../assets/images/icon-special-cold.svg":H,"../assets/images/icon-special-fixed.svg":P,"../assets/images/icon-special-hot.svg":J,"../assets/images/icon-special-limited.svg":K,"../assets/images/icon-special-noCaffeine.svg":Q,"../assets/images/icon-special-recommend.svg":W,"../assets/images/icon-star-empty.svg":ms,"../assets/images/icon-star-full.svg":ds,"../assets/images/icon-star-half.svg":ps,"../assets/images/index-bannerDeco-end.svg":X,"../assets/images/index-bannerDeco-sm-end.svg":Y,"../assets/images/index-bannerDeco-sm-start.svg":Z,"../assets/images/index-bannerDeco-start.svg":ss,"../assets/images/index-wheel-drink-sm.svg":es,"../assets/images/index-wheel-drink.svg":ts,"../assets/images/index-wheel-person.svg":os,"../assets/images/index-wheel-wheel-sm.svg":as,"../assets/images/index-wheel-wheel.svg":is,"../assets/images/logo_一沐日.svg":ns,"../assets/images/logo_五十嵐.svg":rs,"../assets/images/logo_可不可.svg":ls,"../assets/images/logo_清心福全.svg":cs,"../assets/images/logo_約翰紅茶.svg":_s,"../assets/images/wheel-nodrink.svg":gs})[`../assets/images/${s}${t}.svg`],self.location)},judgeSpecialImg(t){const s={店家推薦:"recommend",僅限冷飲:"cold",僅限熱飲:"hot",無咖啡因:"noCaffeine",固定糖冰:"fixed",固定微冰:"fixed",固定三分糖:"fixed",固定少冰:"fixed",固定無糖:"fixed",期間限定:"limited",季節限定:"limited"};return this.imgUrl(s[t],"icon-special-")}}},Ts={class:"row row-cols-3 gx-12 gy-15 list-unstyled"},Ls={class:"searchImage-item-imgSection mb-3"},Rs={class:"searchImage-item-imgContainer"},Es=["src","alt"],Ns={class:"searchImage-item-tag"},As={class:"d-flex align-items-center justify-content-between mb-3"},Fs={class:"fs-4 fw-bold"},Vs={class:"d-flex align-items-center justify-content-between"},Os={class:"list-unstyled mb-0 d-flex justify-content-center"},qs=["src","alt"],zs={class:"font-handwriting fs-6 fs-3xl-5 fs-5 fw-bold"},Hs={key:0},Ps={class:"ms-2"},Js={key:1},Ks={key:2},Qs={class:"ms-2"};function Ws(t,s,n,k,o,_){const v=d("RouterLink"),i=d("RateDisplay");return r(),l("ul",Ts,[(r(!0),l(b,null,S(o.imageModeData,a=>(r(),l("li",{class:"searchImage-item",key:`imageMode ${a.id}`},[c(v,{to:`/drink/${a.id}`},{default:h(()=>[e("div",Ls,[e("div",Rs,[e("img",{class:"searchImage-item-img img-full",src:a.imageUrl,alt:a.name},null,8,Es)]),c(v,{to:`/shops/${a.shop.code}`,class:"searchImage-item-tagContainer"},{default:h(()=>[e("span",Ns,g(a.shop.name),1)]),_:2},1032,["to"])]),e("div",As,[e("h2",Fs,g(a.name),1),c(i,{class:"rateDisplay-sm hasHandText",rate:a.rate},null,8,["rate"])]),e("div",Vs,[e("ul",Os,[(r(!0),l(b,null,S(a.special,(u,w)=>(r(),l("li",{key:`${a.id} ${u}`},[e("img",{class:p({"me-2":w!=a.special.length}),src:_.judgeSpecialImg(u),alt:u},null,10,qs)]))),128))]),e("p",zs,[a.price.m?(r(),l("span",Hs,[x(" M "),e("span",Ps,"$ "+g(a.price.m),1)])):f("",!0),a.price.m&&a.price.l?(r(),l("span",Js," ｜ ")):f("",!0),a.price.l?(r(),l("span",Ks,[x(" L "),e("span",Qs,"$ "+g(a.price.l),1)])):f("",!0)])])]),_:2},1032,["to"])]))),128))])}const Xs=y(Ms,[["render",Ws],["__scopeId","data-v-e5886394"]]),Ys="/whatToDrink/assets/icon-mode-list-2e48adab.svg",Zs="/whatToDrink/assets/icon-mode-block-e17d92fa.svg",se="/whatToDrink/assets/icon-error-a1fa950d.svg",ee={data(){return{display:"table",isGetUrlData:!1,search:{type:"",keyword:""},sort:{select:!1,order:""}}},components:{SearchBar:fs,SwitchBtnGroup:B,SortComponent:Us,SearchImageMode:Xs,SearchTableMode:Ss},watch:{$route:"getUrlData",isGetUrlData(){if(!this.isGetUrlData)return;const{keyword:t,type:s}=this.search;this.getSearchDrink(s,t),this.isGetUrlData=!1},shops(){if(!this.shops.length)return;const t=this.joinShopIdPath();this.getSearchDrink(this.search.type,t)},drinks:{handler(){this.judgeSortFn()},deep:!0,immediate:!0},sort:{handler(){this.judgeSortFn()},deep:!0,immediate:!0}},methods:{...D(I,["getSearchDrink","sortData"]),...D($,["getSearchShops"]),getUrlData(){if(this.search.keyword=this.$route.query.keyword,this.search.type=this.$route.query.type,this.search.type==="shops"){this.getSearchShops(this.search.keyword);return}this.isGetUrlData=!0},joinShopIdPath(){const t=this.shops.map(n=>n.id);let s="";for(let n=0;n<t.length;n+=1)s+=`shopId=${t[n]}`,n!==t.length-1&&(s+="&");return s},judgeSortFn(){const{order:t,select:s}=this.sort;if(!s){this.sortData(t);return}this.sortData(t,s[1])}},computed:{...C(I,["drinks","sortDrinks"]),...C($,["shops"]),resultNum(){let t=0;return this.drinks&&(t=this.drinks.length),t}},created(){this.getUrlData()}},te={class:"container pt-10 pt-md-20 pb-10"},oe={class:"row"},ae={class:"col-12 col-md-10 col-3xl-12 mx-auto"},ie={class:"d-flex flex-column flex-md-row mb-8 mb-md-5 px-10 px-md-0"},ne=e("span",{class:"fs-normal1 fs-md-6 d-inline-block py-2 py-md-0","data-name":"drinks"},"飲料",-1),re=e("span",{class:"fs-normal1 fs-md-6 d-inline-block py-2 py-md-0","data-name":"shops"},"店家",-1),le=e("img",{src:Ys,alt:"列表模式","data-name":"table"},null,-1),ce=e("img",{src:Zs,alt:"圖表模式","data-name":"image"},null,-1),_e={class:"d-none d-md-block"},ge={class:"d-flex flex-column flex-md-row align-items-md-center justify-content-between ms-1 ms-md-1 mb-3 mb-md-10"},me={class:"fs-normal1 fs-md-5 fw-bold"},de={class:"fw-bold"},pe={type:"button",class:"btn btn-hoverScale border-0 d-flex align-items-center"};function he(t,s,n,k,o,_){const v=d("SwitchBtnGroup"),i=d("SearchBar"),a=d("SortComponent"),u=d("SearchTableMode"),w=d("SearchImageMode");return r(),l("div",te,[e("div",oe,[e("div",ae,[e("div",ie,[c(v,{class:"switchBtnGroup-light switchBtnGroup-text-h100 border border-black me-0 me-md-4 mb-3 mb-md-0",defaultSelect:o.search.type,onEmitBtn:s[0]||(s[0]=m=>o.search.type=m)},{start:h(()=>[ne]),end:h(()=>[re]),_:1},8,["defaultSelect"]),c(i,{class:"searchBar-border me-md-3",searchType:o.search.type},null,8,["searchType"]),c(v,{class:"d-none d-md-flex switchBtnGroup-primary switchBtnGroup-icon me-3",onEmitBtn:s[1]||(s[1]=m=>o.display=m)},{start:h(()=>[le]),end:h(()=>[ce]),_:1}),e("div",_e,[c(a,{propsSortSelect:o.sort.select[0],onSortSelect:s[2]||(s[2]=m=>o.sort.select=m),onSortOrder:s[3]||(s[3]=m=>o.sort.order=m)},null,8,["propsSortSelect"])])]),e("div",ge,[e("p",me," 找到 "+g(_.resultNum)+" 個符合「"+g(o.search.keyword)+"」的飲料 ",1),e("div",{class:p(["w-fit d-none d-md-flex align-items-center py-1 ps-6 pe-2 bg-accent-300 border border-black rounded-pill transition-ease",{"opacity-0":!o.sort.select}])},[e("p",de," 目前依照「"+g(o.sort.select[0]?o.sort.select[0]:"排序")+"」 "+g(o.sort.order==="up"?"遞增":"遞減")+"排序 ",1),e("button",pe,[e("img",{src:se,alt:"關閉",onClick:s[4]||(s[4]=m=>o.sort.select=!1)})])],2)]),_.resultNum?(r(),l(b,{key:0},[e("div",{class:p(["pb-10",{"d-none":o.display!=="table"}])},[c(u,{propsData:t.sortDrinks},null,8,["propsData"])],2),e("div",{class:p(["pb-15",{"d-none":o.display!=="image"}])},[c(w,{propsData:t.sortDrinks},null,8,["propsData"])],2)],64)):f("",!0)])])])}const De=y(ee,[["render",he]]);export{De as default};
